## 什么是微前端？
微前端是一种前端架构模式，它将前端应用拆分成多个更小、更易管理的独立部分，这些部分可以独立开发、测试和部署，同时在用户界面上作为一个整体呈现。这种架构方式借鉴了微服务的理念，将其应用到前端开发中。

微前端的核心特征：

1. 独立性：
   - 每个微前端应用可以独立开发、测试和部署。
   - 不同的微前端应用可以使用不同的技术栈。

2. 集成性：
   - 多个微前端应用可以集成到一个整体应用中。
   - 用户感知不到应用是由多个部分组成的。

3. 技术栈无关：
   - 允许在同一个应用中使用不同的前端框架（如 Vue、React、Angular）。

4. 独立部署：
   - 可以独立部署各个微前端应用，而不影响整体应用。

5. 团队自治：
   - 不同团队可以负责不同的微前端应用，减少团队间的依赖。

6. 渐进式迁移：
   - 可以逐步将大型单体前端应用迁移到微前端架构。

## 微前端的实现方式有哪些？有哪些常用的微前端框架？
微前端的实现方式：

1. 基于路由分发：
   - 不同的路由对应不同的微前端应用。

2. 使用 iframe：
   - 每个微前端应用在独立的 iframe 中运行。

3. Web Components：
   - 使用 Web Components 技术封装每个微前端应用。

4. JavaScript 集成：
   - 动态加载每个微前端应用的 JavaScript。

5. 构建时集成：
   - 在构建过程中将多个应用合并。

常见的微前端框架和工具：

1. single-spa：一个用于前端微服务的 JavaScript 框架。
2. qiankun：基于 single-spa 的微前端实现库。
3. Micro Frontends：一种微前端架构的实现方式。
4. Module Federation：Webpack 5 提供的一种代码共享和动态加载解决方案。
5. Piral：一个完整的微前端框架。

微前端的优势：

1. 增强团队自主性和开发效率。
2. 支持大型应用的渐进式升级和重构。
3. 提高代码的可维护性和可扩展性。
4. 允许使用最适合特定功能的技术栈。
5. 支持更灵活的部署策略。

微前端的挑战：

1. 增加了架构的复杂性。
2. 可能导致重复依赖和增加总体加载时间。
3. 需要处理应用间的状态共享和通信。
4. 样式隔离和冲突处理。
5. 需要额外的构建和部署流程。

总的来说，微前端是一种强大的架构模式，特别适合大型、复杂的前端应用，它能够提高开发效率、系统灵活性和可维护性。然而，它也带来了一些额外的复杂性，因此在选择是否采用微前端架构时，需要根据项目的具体需求和团队情况来权衡利弊。

## qiankun的实现原理？
qiankun 是基于 single-spa 的微前端实现库，其核心原理包括：

a. 应用加载：
   - 使用 import-html-entry 库加载子应用的 HTML、JS 和 CSS。
   - 将子应用的 JS 脚本转换为字符串，并使用 eval 执行。

b. 沙箱机制：
   - 使用 Proxy 对象创建 JavaScript 沙箱，隔离子应用的全局变量。
   - 提供快照沙箱和代理沙箱两种模式。

c. CSS 隔离：
   - 通过 Shadow DOM 或动态样式表切换实现样式隔离。

d. 通信机制：
   - 实现了基于 CustomEvent 的应用间通信。

e. 路由劫持：
   - 劫持子应用的路由事件，统一管理路由。

### qiankun应用加载的原理

### qiankun的沙箱机制是如何实现的？

### qiankun的CSS 是如何隔离的？

### qiankun通信机制的原理？

### qiankun的路由是如何劫持的？

## micro-app 的实现原理？

micro-app 是一个基于 Web Components 的微前端框架，其核心原理包括：

a. Custom Elements：
   - 使用 Custom Elements 创建自定义 HTML 元素来加载子应用。

b. 沙箱机制：
   - 使用 with + Proxy 实现 JavaScript 沙箱，隔离子应用的全局变量。

c. HTML 解析：
   - 自己实现了一个 HTML 解析器，解析子应用的 HTML 结构。

d. 样式隔离：
   - 通过给每个子应用的样式添加特定前缀来实现样式隔离。

e. 资源加载：
   - 实现了异步加载子应用资源的机制。

f. 数据通信：
   - 提供了基于自定义事件的应用间通信机制。

## 常用的qiankun和micro-app 的区别？与iframe 有何不同？
qiankun 和 micro-app 都是流行的微前端框架，但它们的实现原理并不是基于 iframe。让我们分别看看这两个框架的实现原理：

主要区别：

1. 基础技术：
   - qiankun 基于 single-spa
   - micro-app 基于 Web Components

2. 沙箱实现：
   - qiankun 使用 Proxy
   - micro-app 使用 with + Proxy

3. 样式隔离：
   - qiankun 支持 Shadow DOM 和动态样式表切换
   - micro-app 使用样式前缀

4. 子应用接入：
   - qiankun 需要子应用进行一定的改造
   - micro-app 对子应用的侵入性较小

5. 性能：
   - micro-app 在某些场景下可能有更好的性能表现

为什么不使用 iframe：

虽然 iframe 是一种简单的实现微前端的方式，但 qiankun 和 micro-app 选择不使用 iframe 主要是因为 iframe 存在以下问题：

1. 性能问题：iframe 会创建独立的渲染进程，可能导致性能开销。
2. 用户体验：iframe 可能导致页面滚动、历史记录、深度链接等问题。
3. 通信复杂：iframe 与主应用之间的通信相对复杂。
4. 资源加载：iframe 可能会重复加载公共资源。
5. SEO 不友好：iframe 中的内容对搜索引擎不友好。

总结：
qiankun 和 micro-app 都采用了更加灵活和高效的方式来实现微前端，而不是依赖 iframe。它们通过自定义的加载、沙箱和隔离机制，实现了更好的性能、更灵活的集成和更好的用户体验。选择哪个框架取决于项目的具体需求、团队的技术栈和对特定特性的需求。
qiankun 和 micro-app 都是流行的微前端框架，但它们的实现原理并不是基于 iframe。让我们分别看看这两个框架的实现原理：
